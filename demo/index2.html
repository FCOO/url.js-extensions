<!DOCTYPE HTML>
<html lang="da" style="font-size: 100%">
<head>
	<title>fcoo.dk - url.js-extensions - Demo</title>
	<meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta http-equiv='x-dns-prefetch-control' content='on'>

	<meta name='copyright' content='FCOO'>
	<meta name='owner' content='FCOO'>

</head>

<body style="text-align:center; font-size:30px">
	<script src="bower_components.js"></script>
	<script src="../src/url.js-extensions.js"></script>
	<script>
        document.write('<div>TEST #3</div><br><div>' + Math.round( Math.random()*100000000) +'</div><br><br><button onClick="clearInterval(interval);">STOP</button>');
    
console.log('window.location.pathname', window.location.pathname); +  //OR window.location.protocol + "//" + window.location.host + (window.location.host ? "/" : "") + window.location.pathname +
console.log('window.location.protocol',window.location.protocol);
console.log('window.location.host',window.location.host);
console.log('window.location.pathname',window.location.pathname);
console.log("window.location.pathname[0]=='/'",window.location.pathname[0]=='/');

console.log(location.href, '==', window.location.protocol + "//" + window.location.host + (window.location.pathname[0]=='/' ? "" : "/") + window.location.pathname);

        
        var count = 0;
        function updateHash(){
            count++;
//            var newUrl    = window.location.pathname +  //OR window.location.protocol + "//" + window.location.host + (window.location.host ? "/" : "") + window.location.pathname +
            var newUrl = window.location.protocol + "//" + 
                         window.location.host + 
                         (window.location.pathname[0]=='/' ? "" : "/") + window.location.pathname;
            var hash = '#count=' + count;

            window.history.replaceState(null, "", newUrl+hash);

            //window.location.replace(hash);
        }

        var interval = setInterval(updateHash, 100);
    </script>
</body>
</html>
